■■　　授業資料URL
https://drive.google.com/drive/folders/0Bwts5UTHjM9EUS14V0w0OEMyUzQ?hl=ja

第10回：データ処理2

■課題の回答案１
●インデックスを使う方法

def kyori(p1,p2)
  d=0
  for i in (0..(p1.size-1)) do
    d = d+(p1[i]^p2[i])
  end
  return d
end

p1  = [1,0,1,0]
p2  = [0,0,1,1]

p kyori(p1,p2)


●転置を使う方法

def kyori_t(p1,p2)
  d=0
  [p1,p2].transpose.each{|x|d=d+x[0]^x[1]}
  return d
end

p1  = [1,0,1,0]
p2  = [0,0,1,1]

p kyori_t(p1,p2)


■データの分析をする

●映画視聴のアンケート対象の映画名の配列

★ここから追加しながらペーストしていきます

movies= ["グレイテストショーマン","風の谷のナウシカ","君の名は","ノーゲイム・ノーライフ","風立ちぬ","ジョーズ","紅の豚","サマーウォーズ","時をかける少女","シンゴジラ","ゼログラビティ","アナと雪の女王","ナルニア国物語","タイタニック","ベイマックス","シェイプオブウォーター","ミニオンズ","美女と野獣","少林サッカー","探偵はbarにいる","聲の形","言の葉の庭","マレフィセント","アナコンダ","ピンポン","キングスマン","羊たちの沈黙","時計じかけのオレンジ","シャイニング","図書館戦争","英国王のスピーチ","プレデターズ","猿の惑星","寄生獣","レッドクリフ","アメリカン・スナイパー","天使にラブソングを","アルマゲドン","フォレストガンプ","インターステラー","フルメタル・ジャケット","ジョニーは戦場へ行った","戦慄の楽譜","アオハライド","ララランド","シックスセンス","バタフライ・エフェクト","はじまりのうた","パシフィックリム","セブン","アントマン","本能寺ホテル","アイ、ロボット","土竜の唄","海猿","デスノート","インセプション"]

●映画名の配列のサイズ

p movies.size


■アンケート結果のデータ（10人分）

●一行が一人のアンケート結果
★追加でペーストします

★　" から　" までを全部コピー・アンド・ペーストしてください

data=
"風の谷のナウシカ,君の名は,風立ちぬ,ジョーズ,紅の豚,サマーウォーズ,シンゴジラ,ゼログラビティ,タイタニック,ベイマックス
インターステラー,ジョニーは戦場へ行った,戦慄の楽譜,アオハライド,ララランド,シックスセンス,バタフライ・エフェクト,アントマン,本能寺ホテル,アイ、ロボット,土竜の唄,海猿,デスノート,インセプション
時をかける少女,タイタニック,図書館戦争,アオハライド,海猿,デスノート
サマーウォーズ,ベイマックス,少林サッカー,探偵はbarにいる,寄生獣,レッドクリフ,アルマゲドン,戦慄の楽譜,アイ、ロボット,海猿
ゼログラビティ,ミニオンズ,マレフィセント,寄生獣
風の谷のナウシカ,君の名は,風立ちぬ,ジョーズ,紅の豚,サマーウォーズ,時をかける少女,アナと雪の女王,ナルニア国物語,美女と野獣,少林サッカー,聲の形,アメリカン・スナイパー,土竜の唄,海猿,デスノート
君の名は,アナと雪の女王,少林サッカー,海猿
風の谷のナウシカ,君の名は,ノーゲイム・ノーライフ,風立ちぬ,ジョーズ,紅の豚,サマーウォーズ,時をかける少女,アナと雪の女王,ミニオンズ,プレデターズ,レッドクリフ,土竜の唄,海猿,デスノート
風の谷のナウシカ,君の名は,ジョーズ,紅の豚,サマーウォーズ,アナと雪の女王,タイタニック,ミニオンズ,美女と野獣,寄生獣,アルマゲドン,図書館戦争,アオハライド,海猿,デスノート
君の名は,風立ちぬ,紅の豚,時をかける少女,アナと雪の女王,ナルニア国物語,タイタニック,ベイマックス,ミニオンズ,美女と野獣,マレフィセント,ピンポン,キングスマン,猿の惑星,寄生獣,レッドクリフ,アルマゲドン,図書館戦争,アオハライド,本能寺ホテル,土竜の唄,海猿,デスノート"


●人単位で区切った配列データにする
（改行文字で文字列を分割します）

people=data.split(/\n/)
 
p people.size
p people[0]
p people[1]

●人単位の文字列をさらに配列に分割
　（,と '' 半角スペースで文字列を分割する）

people[0].split(/,/)

●全員について人単位の文字列をカラムごとの配列にする

hito=people.map{|person|person.split(/,/)}
p hito[0]

●配列の配列の要素

p hito[0][0]

●映画視聴履歴を０と１のベクトル化するメソッド（復習）

def to_vector(movies,hito)
    movies.map{|movie| 
        if hito.member?(movie)
        then  1
        else  0
    end}
end

p to_vector(movies,hito[0])

●人のベクトルの表にする

hito_v=hito.map{|h| to_vector(movies,h)}

●距離を求めるメソッド

def kyori(p1,p2)
  d=0
  [p1,p2].transpose.each{|x|d=d+x[0]^x[1]}
  return d
end

●人のベクトルの表にする

hito_v=hito.map{|h| to_vector(movies,h)}

●人と人の距離を計算する

p kyori(hito_v[0], hito_v[1])

● hito[0] を自分として、全員との距離を比較する
（自分自身とは距離0になる）

jibun=hito_v[0]

p hito_v.map{|aite| kyori(jibun,aite)}

■課題
付録にある73名分のデータを使い

hito_v[0]さんと他の人との距離を配列として出力するプログラムを作成し、最も距離が近い人と遠い人を調べてください


■付録

情報学科１年生のアンケート結果の全データ

data=
"風の谷のナウシカ,君の名は,風立ちぬ,ジョーズ,紅の豚,サマーウォーズ,シンゴジラ,ゼログラビティ,タイタニック,ベイマックス
インターステラー,ジョニーは戦場へ行った,戦慄の楽譜,アオハライド,ララランド,シックスセンス,バタフライ・エフェクト,アントマン,本能寺ホテル,アイ、ロボット,土竜の唄,海猿,デスノート,インセプション
時をかける少女,タイタニック,図書館戦争,アオハライド,海猿,デスノート
サマーウォーズ,ベイマックス,少林サッカー,探偵はbarにいる,寄生獣,レッドクリフ,アルマゲドン,戦慄の楽譜,アイ、ロボット,海猿
ゼログラビティ,ミニオンズ,マレフィセント,寄生獣
風の谷のナウシカ,君の名は,風立ちぬ,ジョーズ,紅の豚,サマーウォーズ,時をかける少女,アナと雪の女王,ナルニア国物語,美女と野獣,少林サッカー,聲の形,アメリカン・スナイパー,土竜の唄,海猿,デスノート
君の名は,アナと雪の女王,少林サッカー,海猿
風の谷のナウシカ,君の名は,ノーゲイム・ノーライフ,風立ちぬ,ジョーズ,紅の豚,サマーウォーズ,時をかける少女,アナと雪の女王,ミニオンズ,プレデターズ,レッドクリフ,土竜の唄,海猿,デスノート
風の谷のナウシカ,君の名は,ジョーズ,紅の豚,サマーウォーズ,アナと雪の女王,タイタニック,ミニオンズ,美女と野獣,寄生獣,アルマゲドン,図書館戦争,アオハライド,海猿,デスノート
君の名は,風立ちぬ,紅の豚,時をかける少女,アナと雪の女王,ナルニア国物語,タイタニック,ベイマックス,ミニオンズ,美女と野獣,マレフィセント,ピンポン,キングスマン,猿の惑星,寄生獣,レッドクリフ,アルマゲドン,図書館戦争,アオハライド,本能寺ホテル,土竜の唄,海猿,デスノート
風の谷のナウシカ,君の名は,シンゴジラ,アナと雪の女王,海猿,デスノート
グレイテストショーマン,風の谷のナウシカ,君の名は,風立ちぬ,紅の豚,サマーウォーズ,時をかける少女,アナと雪の女王,美女と野獣,少林サッカー,聲の形,言の葉の庭,デスノート
風の谷のナウシカ,ノーゲイム・ノーライフ,風立ちぬ,紅の豚,サマーウォーズ,時をかける少女,聲の形,言の葉の庭,寄生獣,レッドクリフ,アメリカン・スナイパー,図書館戦争,本能寺ホテル,土竜の唄
風の谷のナウシカ,君の名は,風立ちぬ,ジョーズ,紅の豚,サマーウォーズ,シンゴジラ,アナと雪の女王,ナルニア国物語,タイタニック,ベイマックス,ミニオンズ,美女と野獣,少林サッカー,聲の形,天使にラブソングを,アルマゲドン,フォレストガンプ,図書館戦争,パシフィックリム,アントマン,土竜の唄,海猿,デスノート
風の谷のナウシカ,君の名は,少林サッカー,マレフィセント
風の谷のナウシカ,君の名は,ジョーズ,紅の豚,サマーウォーズ,時をかける少女,ナルニア国物語,少林サッカー,探偵はbarにいる,聲の形,アナコンダ,レッドクリフ,アルマゲドン,図書館戦争,アオハライド,本能寺ホテル,土竜の唄,海猿,デスノート
風の谷のナウシカ,君の名は,ノーゲイム・ノーライフ,風立ちぬ,紅の豚,サマーウォーズ,時をかける少女,ベイマックス,ミニオンズ,美女と野獣,聲の形,猿の惑星,寄生獣
風の谷のナウシカ,君の名は,サマーウォーズ,時をかける少女,ゼログラビティ,ベイマックス,少林サッカー,聲の形,マレフィセント,プレデターズ,寄生獣,デスノート
風の谷のナウシカ,ジョーズ,紅の豚,サマーウォーズ,時をかける少女,ナルニア国物語,タイタニック,少林サッカー,マレフィセント,アナコンダ,寄生獣,天使にラブソングを,海猿,デスノート
風の谷のナウシカ,君の名は,ノーゲイム・ノーライフ,風立ちぬ,ジョーズ,紅の豚,時をかける少女,アナと雪の女王,タイタニック,ベイマックス,ミニオンズ,美女と野獣,マレフィセント,アナコンダ,寄生獣,アルマゲドン,図書館戦争,戦慄の楽譜,本能寺ホテル,海猿
君の名は,ノーゲイム・ノーライフ,サマーウォーズ,ミニオンズ,聲の形,寄生獣,図書館戦争,土竜の唄,海猿,デスノート
風の谷のナウシカ,君の名は,風立ちぬ,ジョーズ,紅の豚,サマーウォーズ,時をかける少女,アナと雪の女王,タイタニック,ベイマックス,プレデターズ,猿の惑星,寄生獣,天使にラブソングを,海猿,デスノート
風の谷のナウシカ,君の名は,サマーウォーズ,時をかける少女,シンゴジラ,少林サッカー,図書館戦争,海猿,デスノート
風の谷のナウシカ,時をかける少女,マレフィセント,海猿
君の名は,ミニオンズ,少林サッカー
紅の豚,アナと雪の女王,ナルニア国物語,美女と野獣,少林サッカー,アナコンダ,猿の惑星,寄生獣,海猿,デスノート
風の谷のナウシカ,君の名は,風立ちぬ,紅の豚,サマーウォーズ,ナルニア国物語,ミニオンズ,少林サッカー
君の名は,サマーウォーズ,天使にラブソングを
聲の形,キングスマン,時計じかけのオレンジ,天使にラブソングを,アルマゲドン,インターステラー,ララランド,シックスセンス,バタフライ・エフェクト,アントマン
風の谷のナウシカ,君の名は,ノーゲイム・ノーライフ,風立ちぬ,ジョーズ,紅の豚,サマーウォーズ,時をかける少女,シンゴジラ,ゼログラビティ,アナと雪の女王,ナルニア国物語,タイタニック,ベイマックス,ミニオンズ,美女と野獣,少林サッカー,探偵はbarにいる,聲の形,マレフィセント,アナコンダ,キングスマン,時計じかけのオレンジ,図書館戦争,英国王のスピーチ,プレデターズ,猿の惑星,寄生獣,レッドクリフ,アメリカン・スナイパー,天使にラブソングを,アルマゲドン,インターステラー,ジョニーは戦場へ行った,戦慄の楽譜,アオハライド,ララランド,シックスセンス,バタフライ・エフェクト,アントマン,本能寺ホテル,アイ、ロボット,土竜の唄,海猿,デスノート,インセプション
風の谷のナウシカ,ノーゲイム・ノーライフ,サマーウォーズ,時をかける少女,ナルニア国物語,美女と野獣,デスノート
君の名は,サマーウォーズ,時をかける少女,アナと雪の女王,少林サッカー,デスノート
猿の惑星
グレイテストショーマン,風の谷のナウシカ,君の名は,ノーゲイム・ノーライフ,風立ちぬ,ジョーズ,紅の豚,サマーウォーズ,時をかける少女,シンゴジラ,アナと雪の女王,ナルニア国物語,タイタニック,ベイマックス,ミニオンズ,美女と野獣,少林サッカー,探偵はbarにいる,聲の形,言の葉の庭,マレフィセント,アナコンダ,ピンポン,キングスマン,羊たちの沈黙,時計じかけのオレンジ,シャイニング,英国王のスピーチ,プレデターズ,猿の惑星,寄生獣,レッドクリフ,アメリカン・スナイパー,天使にラブソングを,アルマゲドン,インターステラー,フルメタル・ジャケット,ジョニーは戦場へ行った,戦慄の楽譜,アオハライド,ララランド,シックスセンス,バタフライ・エフェクト,はじまりのうた,パシフィックリム,セブン,アントマン,本能寺ホテル,アイ、ロボット,土竜の唄,海猿,デスノート,インセプション
君の名は,サマーウォーズ,シンゴジラ,アナと雪の女王,少林サッカー,猿の惑星,図書館戦争,海猿,デスノート
風の谷のナウシカ,君の名は,ジョーズ,紅の豚,サマーウォーズ,時をかける少女,アナと雪の女王,ナルニア国物語,タイタニック,少林サッカー,言の葉の庭,アナコンダ,キングスマン,プレデターズ,猿の惑星,バタフライ・エフェクト,パシフィックリム,アントマン,海猿,デスノート,インセプション
風の谷のナウシカ,君の名は,紅の豚,サマーウォーズ,時をかける少女,ゼログラビティ,アナと雪の女王,ナルニア国物語,タイタニック,ベイマックス,美女と野獣,少林サッカー,探偵はbarにいる,言の葉の庭,マレフィセント,アナコンダ,プレデターズ,猿の惑星,寄生獣,アメリカン・スナイパー,アルマゲドン,海猿,デスノート
風の谷のナウシカ,君の名は,ノーゲイム・ノーライフ,風立ちぬ,サマーウォーズ,時をかける少女,アナと雪の女王,ナルニア国物語,ベイマックス,ミニオンズ,美女と野獣,少林サッカー,聲の形,言の葉の庭,マレフィセント,猿の惑星,寄生獣,図書館戦争,戦慄の楽譜,アオハライド,デスノート
風の谷のナウシカ,君の名は,風立ちぬ,ジョーズ,紅の豚,サマーウォーズ,時をかける少女,アナと雪の女王,ミニオンズ,聲の形,言の葉の庭,ピンポン,猿の惑星,アルマゲドン,土竜の唄,海猿,デスノート
風の谷のナウシカ,君の名は,サマーウォーズ,アナと雪の女王,ナルニア国物語,ベイマックス,ミニオンズ,少林サッカー,聲の形,英国王のスピーチ,インターステラー,図書館戦争,アオハライド,はじまりのうた,デスノート
風の谷のナウシカ,君の名は,風立ちぬ,紅の豚,サマーウォーズ,時をかける少女,ナルニア国物語,少林サッカー,探偵はbarにいる,プレデターズ,アメリカン・スナイパー,天使にラブソングを,フォレストガンプ
風の谷のナウシカ,君の名は,風立ちぬ,ジョーズ,紅の豚,サマーウォーズ,時をかける少女,アナと雪の女王,ナルニア国物語,タイタニック,ベイマックス,探偵はbarにいる,プレデターズ,猿の惑星,天使にラブソングを,アルマゲドン,本能寺ホテル,海猿,デスノート
風の谷のナウシカ,君の名は,風立ちぬ,ジョーズ,紅の豚,サマーウォーズ,時をかける少女,シンゴジラ,ナルニア国物語,美女と野獣,少林サッカー,猿の惑星,寄生獣,レッドクリフ,海猿,デスノート
レッドクリフ
風の谷のナウシカ,君の名は,ノーゲイム・ノーライフ,風立ちぬ,紅の豚,サマーウォーズ,時をかける少女,アナと雪の女王,タイタニック,ミニオンズ,美女と野獣,聲の形,図書館戦争,デスノート
風の谷のナウシカ,君の名は,紅の豚,サマーウォーズ,アナと雪の女王,少林サッカー
ナルニア国物語,レッドクリフ,ララランド
君の名は,ノーゲイム・ノーライフ,ジョーズ,紅の豚,サマーウォーズ,時をかける少女,シンゴジラ,アナと雪の女王,ベイマックス,ミニオンズ,美女と野獣,寄生獣,図書館戦争,戦慄の楽譜,アオハライド,ララランド,本能寺ホテル,土竜の唄,海猿,デスノート
風の谷のナウシカ,君の名は,ノーゲイム・ノーライフ,ジョーズ,サマーウォーズ,時をかける少女,シンゴジラ,ナルニア国物語,ベイマックス,ミニオンズ,美女と野獣,少林サッカー,聲の形,言の葉の庭,マレフィセント
君の名は,風立ちぬ,紅の豚,サマーウォーズ,時をかける少女,シンゴジラ,ゼログラビティ,アナと雪の女王,ナルニア国物語,タイタニック,ベイマックス,ミニオンズ,探偵はbarにいる,マレフィセント,プレデターズ,猿の惑星,寄生獣,レッドクリフ,天使にラブソングを,アルマゲドン,図書館戦争,アイ、ロボット,海猿,デスノート,インセプション
風の谷のナウシカ,君の名は,風立ちぬ,ジョーズ,紅の豚,サマーウォーズ,時をかける少女,アナと雪の女王,ナルニア国物語,ベイマックス,ミニオンズ,美女と野獣,アナコンダ,猿の惑星,アオハライド,アイ、ロボット,土竜の唄,海猿,デスノート
風の谷のナウシカ,君の名は,風立ちぬ,アナと雪の女王,ナルニア国物語,ミニオンズ,美女と野獣,少林サッカー,アナコンダ,羊たちの沈黙,猿の惑星,寄生獣
風の谷のナウシカ,君の名は,風立ちぬ,紅の豚,サマーウォーズ,時をかける少女,ナルニア国物語,プレデターズ
風の谷のナウシカ,君の名は,風立ちぬ,ジョーズ,紅の豚,時をかける少女,アナと雪の女王,タイタニック,少林サッカー,聲の形,本能寺ホテル,土竜の唄,デスノート
ゼログラビティ,ナルニア国物語,タイタニック,ミニオンズ,少林サッカー,プレデターズ,天使にラブソングを,アルマゲドン,図書館戦争,ララランド,アントマン,本能寺ホテル,デスノート
君の名は,風立ちぬ,アナと雪の女王,ベイマックス
風の谷のナウシカ,君の名は,ジョーズ,紅の豚,サマーウォーズ,時をかける少女,シンゴジラ,ナルニア国物語,タイタニック,ミニオンズ,美女と野獣,少林サッカー,言の葉の庭,プレデターズ,猿の惑星,寄生獣,レッドクリフ,アルマゲドン,フォレストガンプ,図書館戦争,シックスセンス,バタフライ・エフェクト,パシフィックリム,海猿,デスノート
風の谷のナウシカ,君の名は,ノーゲイム・ノーライフ,風立ちぬ,サマーウォーズ,時をかける少女,シンゴジラ,アナと雪の女王,ナルニア国物語,タイタニック,ベイマックス,美女と野獣,少林サッカー,聲の形,言の葉の庭,寄生獣,レッドクリフ,天使にラブソングを,図書館戦争,海猿,デスノート
君の名は,サマーウォーズ,時をかける少女,アナと雪の女王,図書館戦争,アオハライド,デスノート
風の谷のナウシカ,風立ちぬ,紅の豚,時をかける少女,アナと雪の女王,タイタニック,ミニオンズ,美女と野獣,マレフィセント,戦慄の楽譜
ジョーズ,シンゴジラ,タイタニック,ミニオンズ,寄生獣,アオハライド,土竜の唄,デスノート
君の名は,風立ちぬ,ベイマックス,少林サッカー,アルマゲドン,海猿
君の名は,アナと雪の女王,ベイマックス,美女と野獣,フォレストガンプ
風の谷のナウシカ,君の名は,紅の豚,サマーウォーズ,時をかける少女,アナと雪の女王,タイタニック,ミニオンズ,聲の形,言の葉の庭,キングスマン,アメリカン・スナイパー,インターステラー,ララランド,はじまりのうた,デスノート,インセプション
風の谷のナウシカ,君の名は,風立ちぬ,紅の豚,サマーウォーズ,時をかける少女,シンゴジラ,アナと雪の女王,ナルニア国物語,ベイマックス,ミニオンズ,少林サッカー,探偵はbarにいる,寄生獣,土竜の唄,デスノート
風の谷のナウシカ,君の名は,風立ちぬ,紅の豚,サマーウォーズ,時をかける少女,シンゴジラ,ナルニア国物語,ミニオンズ,少林サッカー,探偵はbarにいる,猿の惑星,寄生獣,アルマゲドン,図書館戦争,アオハライド,パシフィックリム,セブン,本能寺ホテル,土竜の唄,海猿,デスノート
君の名は,サマーウォーズ,時をかける少女,タイタニック,猿の惑星,アルマゲドン,本能寺ホテル,土竜の唄,海猿,デスノート
風の谷のナウシカ,君の名は,ノーゲイム・ノーライフ,風立ちぬ,紅の豚,サマーウォーズ,時をかける少女,アナと雪の女王,タイタニック,少林サッカー,探偵はbarにいる,聲の形,言の葉の庭,羊たちの沈黙,英国王のスピーチ,猿の惑星,アメリカン・スナイパー,ジョニーは戦場へ行った,図書館戦争,アオハライド,パシフィックリム,土竜の唄,海猿
シェイプオブウォーター,美女と野獣
風の谷のナウシカ,ノーゲイム・ノーライフ,サマーウォーズ,時をかける少女,少林サッカー,レッドクリフ,海猿,デスノート
君の名は,ノーゲイム・ノーライフ,風立ちぬ,紅の豚,サマーウォーズ,時をかける少女,アナと雪の女王,ナルニア国物語,ベイマックス,ミニオンズ,聲の形,言の葉の庭,英国王のスピーチ,プレデターズ,図書館戦争,アオハライド,本能寺ホテル,デスノート
君の名は
君の名は,サマーウォーズ,探偵はbarにいる,図書館戦争"


