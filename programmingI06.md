■■　　授業資料URL
https://drive.google.com/drive/folders/0Bwts5UTHjM9EUS14V0w0OEMyUzQ?hl=ja

第6回：文字列の処理と正規表現



■文字列

●文字列のインデックス

p "しかもかもしかもしかである"[0]
p "しかもかもしかもしかである"[1]
p "しかもかもしかもしかである"[2]
p "しかもかもしかもしかである"[3]

●インデックスによる文字列要素への代入

message="しかもかもしかもしかである"
message[2]="と"
p message

●文字列の文字数を得るメソッド

"しかもかもしかもしかである".size


●文字列の部分を範囲で取り出す

"しかもかもしかもしかである"[3..6]

■正規表現
●正規表現と文字列の一致

p /しか/ =~ "しかもかもしかもしかである"
p /かもしか/ =~ "しかもかもしかもしかである"
p /もしも/ =~ "しかもかもしかもしかである"

●文字列の部分を全て置き換えるメソッド

p "しかもかもしかもしかである".gsub(/しか/,"鹿")

●文字列を置き換える順序による違い

message="しかしあしかはしかでない"
message=message.gsub(/しか/,"鹿")
message=message.gsub(/あしか/,"アシカ")
message=message.gsub(/しかし/,"然し")
puts message

message="しかしあしかはしかでない"
message=message.gsub(/あしか/,"アシカ")
message=message.gsub(/しかし/,"然し")
message=message.gsub(/しか/,"鹿")
puts message

■課題

●"しかもかもしかもしかであるしかしあしかはしかでない"
を
"鹿もカモシカも鹿である然しアシカは鹿でない"
に変換するプログラムを書いてください

●実際に実行した結果もコピーして付けてください



■前回の課題

message="しかもかもしかもしかであるしかしあしかはしかでない"
message=message.gsub(/あしか/,"アシカ") 
message=message.gsub(/かもしか/,"カモシカ") 
message=message.gsub(/しかし/,"然し") 
message=message.gsub(/しか/,"鹿") 
puts message

鹿もカモシカも鹿である然しアシカは鹿でない

●連結：+

p "わたし"+"まけましたわ"

●反転：reverse

p "abcdefg".reverse

●同一の文字列を比較：==

p "abc" == "abc"
p "abc" == "acb"

●空文字列か？：empty?

p "abc".empty?
p "".empty?

●文字列を整数に変換：to_i

p "20".to_i(10)
p "20"+"18"
p "20".to_i(10)+18

●分割：split

"九州工業大学九州大学福岡大学北九州市立大学福岡県立大学".split(/大学/)


■正規表現

●文字列の繰り返し

p /Goo*gl/=~"Gogl"
p /Goo*gl/=~"Googl"
p /Goo*gl/=~"Gooooooogl"

p /Goo+gl/=~"Gogl"
p /Goo+gl/=~"Googl"
p /Goo+gl/=~"Gooooooogl"

p /Goo?gl/=~"Gogl"
p /Goo?gl/=~"Googl"
p /Goo?gl/=~"Gooogl"

●任意の１文字とマッチする

p /私は.です/=~"私は神です"
p /私は.です/=~"私は人間です"
p /私は..です/=~"私は人間です"
p /私は.+です/=~"私はホモ・サピエンスです"

●[]の中のどれか１文字とマッチする

p /私は[鰻肉鮨]を食べたい/=~"私は鰻を食べたい"
p /私は[鰻肉鮨]を食べたい/=~"私は肉を食べたい"
p /私は[鰻肉鮨]を食べたい/=~"私は鮨を食べたい"
p /私は[鰻肉鮨]を食べたい/=~"私は米を食べたい"

●| で区切られたどれかの文字列とマッチする

p /私は(ステーキ|寿司)を食べたい/=~"私はステーキを食べたい"
p /私は(ステーキ|寿司)を食べたい/=~"私は寿司を食べたい"
p /私は(ステーキ|寿司)を食べたい/=~"私はいくらを食べたい"

●^	文字列の先頭のときだけマッチする

p /^カモシカ/ =~ "鹿もカモシカも鹿である"
p /^カモシカ/ =~ "カモシカは鹿である"

●$ 文字列の最後のときだけマッチする

p /ですか$/ =~ "あなたは大学教授ですか"
p /ですか$/ =~ "ああ大学教授ですか、ご愁傷さまです"

●メタ文字のエスケープ

p /www.kindai.ac.jp/=~"http://www=kindai-ac+jp"
p /www\.kindai\.ac\.jp/=~"http://www=kindai-ac+jp"
p /www\.kindai\.ac\.jp/=~"http://www.kindai.ac.jp"

●松岡修造ボット

def shuzo(msg)
  if /(どうしても|何度やっても|なかなか)/ =~ msg 
  then
    puts "今日からお前は、富士山だ！"
    puts "富士山みたいに日本一になるんだ！"
  end
  if /(悩んで|難し|挫折しそう|わからない|苦手)/ =~ msg 
  then
    puts "今日から君は噴水だ!!"
    puts "噴水を見てみろよ。噴水は、喜びも悲しみも、楽しさも悔しさも、すべてを一所懸命出し切っている。"
    puts "だから、あれほどキラキラと輝いているんだよ"
    puts "君も噴水になってみろ。"
  end
end

shuzo("どうしてもプログラミングがうまくなりません")
shuzo("プログラミングに挫折しそうです")

■課題
正規表現によるパターンマッチを利用して、できるだけ自然な会話をする美輪明宏ボットのプログラムを作成してください

例
miwasan("私のオーラは何色ですか")
=> あなたのオーラの色は紫ね

miwasan("私の前世は何ですか")
=> あなたの前世はピカチューね

miwasan("どうしてわかるんですか")
=> 見えるのよ



